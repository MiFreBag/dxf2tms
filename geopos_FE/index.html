<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>

	<meta http-equiv="X-UA-Compatible" content="IE=8" />

	<title>Main</title>  
	
	<link href="/library/frameworks/jquery/lib.css" rel="stylesheet" type="text/css" />
	<script src="/library/frameworks/jquery/lib.js" type="text/javascript"></script>

	<!-- alertMaster -->
	<script type="text/javascript" src="/library/js/amApi.js"></script>
	<script src="/library/js/amView.js"></script>
		 
	<!-- customizations  -->
	<link href="/library/am.css" rel="stylesheet" type="text/css" />
	
	<!-- block UI -->
	<script type="text/javascript" src="/library/frameworks/jquery/js/plugins/jquery.blockUI.js"></script>
	
	<!-- file upload -->
	<link href="/library/frameworks/jquery/js/plugins/dropper/jquery.fs.dropper.css" rel="stylesheet" type="text/css" media="all"/>
	<script src="/library/frameworks/jquery/js/plugins/dropper/jquery.fs.dropper.js"></script>

	<!-- file download -->
	<script type="text/javascript" src="/library/frameworks/jquery/js/plugins/jquery.fileDownload.js"></script>	
  
	<!-- leaflet -->	
	<link href="/pages/geopos/js/layers/layout.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="/library/frameworks/leaflet/leaflet-src.js"></script>
	<script type="text/javascript" src="/library/frameworks/leaflet/proj4-compressed.js"></script>
	<script type="text/javascript" src="/library/frameworks/leaflet/proj4leaflet.js"></script>

	<!-- geopos  -->
	<link type="text/css" href="/themes/vrsz/pages/geopos/geopos.css" rel="stylesheet"/>
	<link type="text/css" href="/pages/geopos/js/editor.css" rel="stylesheet" />
	<link type="text/css" href="/pages/geopos/js/viewer.css" rel="stylesheet" />
	<link type="text/css" href="/pages/geopos/js/tools/stylers/styleselector.css" rel="stylesheet" />
	
	<script type="text/javascript" src="/pages/geopos/js/tools/object.js"></script>
	<script type="text/javascript" src="/pages/geopos/js/tools/shape.js"></script>
	<script type="text/javascript" src="/pages/geopos/js/tools/edit.js"></script>
	<script type="text/javascript" src="/pages/geopos/js/tools/stylers/styleselector.js"></script>
	<script type="text/javascript" src="/pages/geopos/js/tools/zorder.js"></script>
	
	<script type="text/javascript" src="/pages/geopos/js/layers/static.js"></script>
	<script type="text/javascript" src="/pages/geopos/js/layers/layout-poly.js"></script>
	<script type="text/javascript" src="/pages/geopos/js/layers/layout.js"></script>
	<script type="text/javascript" src="/pages/geopos/js/layers/dynamic.js"></script>
	<script type="text/javascript" src="/pages/geopos/js/layers/project.js"></script>
	
	<script type="text/javascript" src="/pages/geopos/js/editor.js"></script>
	<script type="text/javascript" src="/pages/geopos/js/viewer.js"></script>

	<style>
		
		* {
			-webkit-box-sizing : border-box;
			-moz-box-sizing    : border-box;
			box-sizing         : border-box;
			user-select: none;
			
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;			
		}
		
		

		/**********************/
		/* Small window style */
		/**********************/
		@media ( max-width : 1000px ) 
		{
			/**
			 * Menu and buttons
			 */
			#toolbar-container {
				height : 40px;
			}

			#map-container {
				top: 40px;
			}

			.geopos-tab-button {
				min-width : 40px;
			}

			.geopos-tab-button-icon {
				height : 100%;
			}

			.geopos-tab-button-text {
				display : none;
			}
		}

		@media ( max-width : 1360px ) {
			#knoten-title {
				font-size: 20px;
			}
		}

		@media ( max-width : 1270px ) {
			#knoten-title {
				font-size: 16px;
			}
		}

		@media ( max-width : 1200px ) {
			#knoten-title {
				font-size: 14px;
			}
		}

		@media ( max-width : 1130px ) {
			#knoten-title {
				font-size: 12px;
			}
			#knoten-title+div {
				font-size: 10px;
			}
		}

		@media ( max-width : 1030 ) {
			#knoten-title {
				font-size: 10;
			}
			#knoten-title+div {
				font-size: 9px;
			}
		}
	

	</style>
	
	<script>
	
	$(document).ready(function ()  
	{
	
		//http://plr2-dev/index.html?viewname=kntvis-491&zooming=true

		var svg = $("svg:first")[0];
		var $defs = $("defs", $(svg));
    	var config = JSON.parse(<CONFIG>);
    	
		var $currentplan;
		if (config.plan == null)
		{
			$currentplan = $("#LAGEPLAN", $defs);
			$(".geopos-type .geopos-tab-button[name='LAGEPLAN']").addClass("active");
		}
		else
		{
			$currentplan = $("#"+config.plan, $defs);		
			$(".geopos-type .geopos-tab-button[name='"+config.plan+"']").addClass("active");
		}

		
		$("#mapcity").show();
		$("#mapknoten").hide();

		$("#knoten-title").text(config.title);

		$("#map-global").button();
		$("#map-local").button();
		$("#map-select").button();
		$("#map-help").button();	
		//
		// View selection toolbar
		// 
		$('.geopos-view .geopos-tab-button').each(function () 
		{
			var id = this.getAttribute('name');
			var title = $('.geopos-tab-button-text', this).html().replace('<br>', ' ');

			$('.'+ id ).dialog({
				modal : false,
				width : 355,
				closeOnEscape : false,
				title : title,
				position : {my:'right top', at:'right top', of:$('#map-container')}
			}).parent().hide();
			
			$(".ui-dialog-titlebar-close", $('.'+ id ).parent()).hide();
		});
		
			
		$('.geopos-view .geopos-tab-button').on( 'click', function ( evt ) 
		{
			// disable active view
			var $view = $('.active', $('.geopos-view'));
			var	viewId = $view.attr('name');
			
			// generate background image if necessary
			if (viewId == "LAYOUT")
			{
				if (layer["LAYOUT"].lageUpdated())
				{
					$("#generate-button").trigger("click");			
					return false;
				}
			}
			
			layer[viewId].deactivate($currentplan);
			$view.removeClass('active');
			var $viewDialog = $('.'+ viewId);
			var position = $viewDialog.dialog( 'option', 'position' );
			$viewDialog.parent().hide();

			// enable selected active view
			$view = $(this);
			viewId = $view.attr('name');
			layer[viewId].activate($currentplan);
			$view.addClass('active');
			$('.'+ viewId).dialog( 'option', 'position', position ).parent().show();
			
			if (viewId == "DYNAMIC")
			{
				$('.geopos-type .geopos-tab-button').addClass("hidden");
			}
			else
			{
				$('.geopos-type .geopos-tab-button').removeClass("hidden");
			}			
		});
		
		// toggle background image
		$('.geopos-view .geopos-dynamic-background').on('click', function ( evt ) 
		{
			var url = $("image", $(svg)).attr("xlink:href");
			var result = url.substring(0, url.lastIndexOf('/')+1) + "lageplan_dynamic.png" + "?"+ new Date().getTime();
			$("image", $(svg)).attr("xlink:href", result);
		});

		$('.geopos-view .geopos-static-background').on('click', function ( evt ) 
		{
			var url = $("image", $(svg)).attr("xlink:href");
			var result = url.substring(0, url.lastIndexOf('/')+1) + "lageplan_static.png" + "?"+ new Date().getTime();
			$("image", $(svg)).attr("xlink:href", result);
		});
		
		//
		// Plan selection toolbar
		//
		$('.geopos-type .geopos-tab-button').on('click', function ( evt ) 
		{
			// update active button
			var $plan = $('.active', $('.geopos-type'));
			$plan.removeClass('active');
			var $plan = $(this);
			$plan.addClass('active');

			// update view with selected plantype
			var $view = $('.active', $('.geopos-view'));
			var	viewId = $view.attr('name');
			layer[viewId].clrPlan($currentplan);
			$currentplan = $("#"+this.getAttribute('name'), $defs);
			layer[viewId].setPlan($currentplan);
		});
		
		
		//
		// Action toolbar
		//
	    $("#save-button").click(function()
   	    {
	    	var object = svgEditor.detach();
	    	
	    	
	    	var percent = 1;
	    	var timer = null;
	    	
			amRegister("geopos-plansaved",
			{
				dataSaved: function(message)
				{
					if (message != null)
					{
						amErrorDialog("Speicherfehler", message);
						$.unblockUI();
						svgEditor.attach(object);
						amUnregister("geopos-plansaved");
					}
					else
					{
						$(".geopos-view .geopos-tab-button .geopos-tab-button-text").removeClass("dirty");
						
						if (svgEditor.generateLisa())
						{
							amCall("geopos-plan", "createLisaImage", [false], "geopos-plansaved", "lisaCreated");
							$("span", $("#blockMessage")).text("LISA Versorgung wird generiert (0%) ");
			
							timer = setInterval(function()
				   			{
								$("span", $("#blockMessage")).text("LISA Versorgung wird generiert (" + percent + "%)");
								percent += 1;
				   			}, 3*1000);
						}
						else
						{
					    	$("span", $("#blockMessage")).text("Knotenplan wird exportiert... ");
							amCall("geopos", "export", [], "geopos-plansaved", "dataExported");
						}
					}
				},
				lisaCreated: function(message)
				{
			    	clearInterval(timer);
					if (message != null)
					{
						amErrorDialog("Speicherfehler", message);
						$.unblockUI();
						svgEditor.attach(object);
						amUnregister("geopos-plansaved");
					}
					else
					{
				    	$("span", $("#blockMessage")).text("Knotenplan wird exportiert... ");
						amCall("geopos", "export", [], "geopos-plansaved", "dataExported");
					}
				},
				dataExported: function(message)
				{
					if (message != null)
					{
						amErrorDialog("Speicherfehler", message);
					}
					$.unblockUI();
					svgEditor.attach(object);
					amUnregister("geopos-plansaved");
				}
				
			});
			
			$.blockUI({ css: { 
				border: 'none', 
				padding: '15px', 
				backgroundColor: '#000', 
				'-webkit-border-radius': '10px', 
				'-moz-border-radius': '10px', 
				opacity: .5, 
				color: '#fff'            
				},
				message : $("#blockMessage")	
			}); 
			
	    	$("span", $("#blockMessage")).text("Knotenplan wird gespeichert... ");
			amCall("geopos", "save", [], "geopos-plansaved", "dataSaved");
		});

	
		$('#update-button').on('click', function(evt)
		{
			amGet("geopos", "refreshStatic", []);
			amGet("geopos", "refreshDynamic", []);
			window.top.location.reload();
		});

		$('#help-button').on('click', function(evt)
				{
					showHelp("geopos");	
				});

		
		function showHelp(amlink){
			// get Windowtitle and helpurl out of URL config 
			
			var view_name = amlink;
			var winsize = {width:840, height:915};		// default size of the help window
			var helpurl = '';
			var title ='';
			
			var UrlAttr = amGetUrlAttribs( view_name );
			if( !UrlAttr.hasOwnProperty('helpurl') ){
				UrlAttr = amGetUrlAttribs( 'generalhelp' );
			}
			
			helpurl = UrlAttr.helpurl;

			// Open Help Window
			amWindow(winsize).open(helpurl, title);
		}
		
	    $("#upload-button").click(function()
  		{
	 		var $dialog = $("#upload-dialog");
	 		$dialog.dialog({
    	  	    modal: true,
    	  	    //position: {collision: 'none' },
    	  	    width: 400,
   	  	        buttons: {
    	   	        "Ausfuehren": function() 
    	   	        {
    	   	        	$("span", $("#blockMessage")).text("MapTiler wird ausgeführt");
    	   				amRegister("geopos-tiling",
  						{
  							tileProgress: function(message)
  							{
								$("span", $("#blockMessage")).text(message);
  								if (message == "done")
  								{
  	  								$.unblockUI();
  	  								amUnregister("geopos-tiling");
  	  					    		window.top.location.reload();
  								}
  							},
  						});
  						
  						$.blockUI({ css: { 
  							border: 'none', 
  							padding: '15px', 
  							backgroundColor: '#000', 
  							'-webkit-border-radius': '10px', 
  							'-moz-border-radius': '10px', 
  							opacity: .5, 
  							color: '#fff'            
  							},
  							message : $("#blockMessage")	
  						}); 
  						
  						if ($("#LV95").prop('checked'))
  						{
  							amCall("geopos-tilemapper", "createTiles", [config.knoten, "LV95", "0", $("#zoom-to").val(),  $("#map-comment").val()], "geopos-tiling", "tileProgress");
 		   	 			}
 		   	 			else
 		   	 			{
 		   	 			//alert("not checked");
 		   	 				amCall("geopos-tilemapper", "createTiles", [config.knoten, "LV03", "0", $("#zoom-to").val(),  $("#map-comment").val()], "geopos-tiling", "tileProgress");
 		   	 			}
    	  	            $(this).dialog("close");
    	  	        },
	   	        	"Abbrechen": function() {
		   	 			amCall("geopos-tilemapper", "abortTiles", [config.knoten]);
	  	            	$(this).dialog("close");
	  	        	}
    	  	    },
			
			 	open: function(event, ui) 
			 	{
			 		$(".ui-dialog-buttonpane button:nth-child(1)").button("disable");
	   	 			var entries = JSON.parse(amGet("geopos-plan", "getTileList", [config.knoten]));

	   	 			var $list = $("#map-list", $dialog);
	   	 			$list.empty();
	   	 			for (var i=0; i<entries.length; i++)
   	 				{
			            $list.append("<option value='" + entries[i].timestamp + "'"+((i==0)?"disabled":"")+">" + amFormatDate(new Date(entries[i].timestamp)) + "-" + entries[i].comments+"</option>");
   	 				}
	   	 			
	   	 			$list.change(function ()
	   	 			{
		   	 			$("#delete-map").button("enable");
	   	 			});
	   	 			$("#delete-map").button().click(function ()
	   	 			{
		   	 			amConfirmDialog('Bestätigung', 'Wollen Sie die Karte wirklich loeschen, oder vielleicht doch nicht?', function()
		   	 			{
		 		   	 		amCall("geopos-tilemapper", "deleteTiles", [config.knoten, $list.val()]);
		   	 				$('option:selected', $list).remove();
			   	 		});
	   	 			});
	   	 			$("#delete-map").button("disable");
			 		
	   			    function onFileStart(e, file) 
					{
						$(".dropper-dropzone", $(e.target)).removeClass("uploaded");
						$(".dropper-dropzone", $(e.target)).removeClass("error");
						$(".dropper-dropzone", $(e.target)).addClass("uploading");
						$(".dropper-dropzone", $(e.target)).text("uploading " + file.name + " (0 %)");
					}
	
					function onFileProgress(e, file, percent) 
					{
						$(".dropper-dropzone", $(e.target)).text("uploading " + file.name + " (" + percent + " %)");
					}
	
					function onFileComplete(e, file, response) 
					{
						$(".dropper-dropzone", $(e.target)).removeClass("uploading");
						if (response.trim() === "" || response.toLowerCase().indexOf("error") > -1) 
						{
							$(".dropper-dropzone", $(e.target)).addClass("error");
							$(".dropper-dropzone", $(e.target)).text(response.trim());
						} 
						else 
						{
							$(".dropper-dropzone", $(e.target)).addClass("uploaded");
							$(".dropper-dropzone", $(e.target)).text("uploading " + file.name + " (100 %)");
						}
						
						if ($(".dropper-dropzone", $("#droppedA")).hasClass("uploaded"))
						{
					 		$(".ui-dialog-buttonpane button:nth-child(1)").button("enable");
						}
						else
						{
					 		$(".ui-dialog-buttonpane button:nth-child(1)").button("disable");
						}
					}
	
					function onFileError(e, file, error) 
					{
						$(".dropper-dropzone", $(e.target)).addClass("error");
						$(".dropper-dropzone", $(e.target)).text(error.trim());
					}
						
					$("#droppedA").dropper({
						maxSize: 10*5242880, // 50MB
						action: amPageLink("pages/geopos/upload-background.html", { type: "static", knoten:config.knoten }),
						label: "Plangrundlage für <b>Knotenmappe</b><br> via drag/drop für Knoten " + config.knoten + " hochladen"
					}).on("fileStart.dropper", onFileStart)
					  .on("fileProgress.dropper", onFileProgress)
					  .on("fileComplete.dropper", onFileComplete)
					  .on("fileError.dropper", onFileError);
					
					$("#droppedB").dropper({
						maxSize: 10*5242880, // 50MB
						action: amPageLink("pages/geopos/upload-background.html", { type: "dynamic", knoten:config.knoten  }),
						label: "Plangrundlage für <b>dynamische Visualisierung</b> <br> via drag/drop für Knoten " + config.knoten + " hochladen"
					}).on("fileStart.dropper", onFileStart)
					  .on("fileProgress.dropper", onFileProgress)
					  .on("fileComplete.dropper", onFileComplete)
					  .on("fileError.dropper", onFileError);
					  
					  
					if (config.srs === "LV95")
					{
		   	 			$("#LV95").prop('checked', true);
						$("#LV95").attr("disabled", true);
					}
					else
					{
						$("#LV95").on("click", function()
						{
							if ($(this).prop("checked"))
							{
								var $dialog = $("#lv95-dialog");
						 		$dialog.dialog({
					    	  	    modal: true,
					    	  	    width: 400,
					   	  	        buttons: 
					   	  	        {
					   	  	            "Ausfuehren": function() 
					    	   	        {
					    	  	            $(this).dialog("close");
					    	  	            amGet("geopos", "toLV95", []);
											window.top.location.reload();
					    	  	        },
						   	        	"Abbrechen": function() {
							   	 			$("#LV95").prop('checked', false);
						  	            	$(this).dialog("close");
						  	        	}				   	  	        
					   	  	        }
				   	  	        });
							};										
						});
					}					
						  
			 	},
			 	
    	  	    close: function ()
    	  	    {
					$("#droppedA").dropper("destroy").html("");
					$("#droppedB").dropper("destroy").html("");
    	  	    }
    	  	});
		});
  	    
	    

	    $("#shift-button").click(function()
		{
	    	var toBeCorrected = [];

	    	var registerForCorrection = function(node)
	    	{
	    		var matrix = svgEditor.getMatrix(node);
	    		toBeCorrected.push({
	    			node: node,
	    			matrix: matrix,
	    			initial_e: matrix.e,
	    			initial_f: matrix.f
	    		});
	    	}

	    	var correct = function(key, value)
	    	{
				for ( var i = 0, len = toBeCorrected.length; i < len; i++ )
				{
					var node = toBeCorrected[i].node;
					var matrix = toBeCorrected[i].matrix;
					matrix[key] = toBeCorrected[i]['initial_'+key] + value;
	    			svgEditor.setMatrix(node, matrix);
				}
	    	}

			var saveCorrection = function()
			{
				for ( var i = 0, len = toBeCorrected.length; i < len; i++ )
				{
					var node = toBeCorrected[i].node;
					amCall("geopos-svg", "updateAttribute", [node.getAttribute("id"), 'object', "transform", node.getAttribute("transform")]);
				}
			}
	    	
	    	$(".object", $("#AMPEL.category")).each(function ()
   	    	{
   	    		registerForCorrection(this);
   	    	});
   	    	$(".object", $("#AMPELMAST.category")).each(function ()
   	       	{
   	    		registerForCorrection(this);
   	       	});
   	    	$(".object", $("#DETEKTOR.category")).each(function ()
   	       	{
   	    		registerForCorrection(this);
   	      	});
   	    	$(".object", $("#SPUR.category")).each(function ()
   	      	{
   	    		registerForCorrection(this);
   	      	});

   	    	$(".shape", $("#PROJECT0")).each(function ()
   	      	{
   	    		registerForCorrection(this);
   	      	});
   	    	$(".shape", $("#PROJECT1")).each(function ()
   	      	{
   	    		registerForCorrection(this);
   	      	});

   	    	
			var dialog = amDialog({
				open: function () {
					var $correctX = dialog.$('#correctX');
					var $correctY = dialog.$('#correctY');
					var $correctXvalue = dialog.$('#correctXvalue');
					var $correctYvalue = dialog.$('#correctYvalue');

					$correctX.slider({
						min: -2,
						max: 2,
						step: .1,
						slide: function ( event, ui )
						{
							$correctXvalue.val(ui.value);
							correct('e', ui.value);
						},
						change: function ( event, ui )
						{
							correct('e', ui.value);
							saveCorrection();
						}
					});

					$correctXvalue.change(function ()
					{
						$correctX.slider("value", this.value);
					});

					$correctY.slider({
						min: -2,
						max: 2,
						step: .1,
						slide: function ( event, ui )
						{
							$correctYvalue.val(ui.value);
							correct('f', ui.value);
						},
						change: function ( event, ui )
						{
							correct('f', ui.value);
							saveCorrection();
						}
					});

					$correctYvalue.change(function ()
					{
						$correctY.slider("value", this.value);
					});
				}
			});

			dialog.openClone( $('#shift-dialog').clone(true) );
			
			
//			window.open('/pages/geopos/print-plan.html?plan='+$currentplan.attr('id')+"&nodepath="+config.nodePath+"&logname="+config.logname, 'print_preview');
		});

	    
		//
		// Editor
		//
		var svgEditor = new SvgEditor(document, svg,
		{
			createNode : function (object)
			{
				var active = $('.active', $('.geopos-view')).attr('name');
				if (layer[active].createNode != null)
				{
					layer[active].createNode(object);
					this.editEvent(active);
				}
			},
			deleteNode : function (object)
			{
				var active = $('.active', $('.geopos-view')).attr('name');
				if (layer[active].deleteNode != null)
				{
					layer[active].deleteNode(object);
					this.editEvent(active);
				}
			},
			updateNode : function (object)
			{
				var active = $('.active', $('.geopos-view')).attr('name');
				if (layer[active].updateNode != null)
				{
					layer[active].updateNode(object);
					this.editEvent(active);
				}
			},
			createPattern : function (name)
			{
				var active = $('.active', $('.geopos-view')).attr('name');
				if (layer[active].createPattern != null)
				{
					layer[active].createPattern(name);
					this.editEvent(active);
				}
			},
			deletePattern : function (nameArr)
			{
				var active = $('.active', $('.geopos-view')).attr('name');
				if (layer[active].deletePattern != null)
				{
					layer[active].deletePattern(nameArr);
					this.editEvent(active);
				}
			},
			updateAttribute : function (object, name)
			{
				var active = $('.active', $('.geopos-view')).attr('name');
				if (layer[active].updateAttribute != null)
				{
					layer[active].updateAttribute(object, name);
					this.editEvent(active);
				}
			},
			selectNode : function (object, multiselection)
			{
				var active = $('.active', $('.geopos-view')).attr('name');
				if (layer[active].selectNode != null)
				{
					layer[active].selectNode(object, multiselection);
				}
			},
			deselectNode : function (object, multiselection)
			{
				var active = $('.active', $('.geopos-view')).attr('name');
				if (layer[active].deselectNode != null)
				{
					layer[active].deselectNode(object, multiselection);
				}
			},
			multiSelect : function (state)
			{
				var active = $('.active', $('.geopos-view')).attr('name');
				if (layer[active].multiSelect != null)
				{
					layer[active].multiSelect(state);
				}
			},
			selectAll : function (state)
			{
				var active = $('.active', $('.geopos-view')).attr('name');
				if (layer[active].selectAll != null)
				{
					layer[active].selectAll(state);
				}
			},
			
			editEvent : function (category)
			{
				$(".geopos-view .geopos-tab-button[name='"+category+"'] > .geopos-tab-button-text").addClass("dirty");
			},
		});
		
		var svgViewer = new SvgViewer(document, svg, svgEditor);
		svgViewer.disable();

		var layer = { 
				"LAYOUT" :  new LayoutLayer($("#LAYOUT.geopos-section"), $("#LAYOUT.layer", $(svg)), $defs, svgEditor, svgViewer, config),
				"DYNAMIC" :  new DynamicLayer($("#DYNAMIC.geopos-section"), $("#DYNAMIC.layer", $(svg)), $defs, svgEditor, svgViewer),
				"STATIC" :  new StaticLayer($("#STATIC.geopos-section"), $("#STATIC.layer", $(svg)), $defs, svgEditor, svgViewer, config),
				"PROJECT" :  new ProjectLayer($("#PROJECT.geopos-section"), $("#PROJECT0.layer", $(svg)), $("#PROJECT1.layer", $(svg)), svgEditor, svgViewer),
		};
		
		ShapeTool.init(svgEditor, svgViewer);
		EditTool.init(svgEditor, $("#PROJECT.layer")[0]);

		// hide all objects
		$("geopos\\:category", $defs).each(function(evt) 
		{
    		$("#"+$(this).attr("id")+".category").hide();
		});		
		
		if (config.autogen == true || config.plan == null)
		{
			$(".geopos-view .geopos-tab-button[name='LAYOUT']").click();
			//$(".geopos-type .geopos-tab-button[name='LAGEPLAN']").click();
		}
		else
		{
			$(".geopos-view .geopos-tab-button[name='STATIC']").click();
			//$(".geopos-type .geopos-tab-button[name='"+config.plan+"']").click();
		}
       
 		// this does not belong here
		$( 'div#PROJECT.ui-dialog-content ' ).css({
			height : 600,
		});
		
		//
		// Window Functions
		//
		
		$(window).resize(function(e)  
		{
			var active = $('.active', $('.geopos-view')).attr('name');
			if (layer[active].resizeWindow != null)
			{
				layer[active].resizeWindow(e);
			}

			var sizeToolbars = 1
				+ $('#bar1').width()
				+ $('#bar2').width()
				+ $('#bar3').width()
				+ $('#bar5').width();

			$('.geopos-info').width( 'calc(100% - '+ sizeToolbars +'px)' );
		});
		
	    if (config.readonly)
    	{
		    $("#save-button").hide();
		    $("#upload-button").hide();
		    $("#update-button").hide();
		    $(document).bind("keydown", function (e) 
		    { 
		    	if ((e.which || e.keyCode) == 116) 
	    		{
		    		e.preventDefault();
		    		top.window.close();
	    		}
		    });
    	}
	    else
		{
		    if (config.promptRefresh)
	    	{
		    	amConfirmDialog("Dokumentenstruktur veraltet!", "Soll der Plan aktualisiert werden?\n\n Das Dokument wird neu aufgebaut und der Symbolkatalog wird neu geladen",function()
		    	{
		        	amGet("geopos", "refreshStatic", []);
		        	amGet("geopos", "refreshDynamic", []);
		        	window.top.location.reload();
				}); 
	    	}
		    else if (config.fileUpdated)
	    	{
		    	amConfirmDialog("Knotenplan ist aktualisiert.", "Soll die Aktualisierung gespeichert werden ?",function()
		    	{
		    		$("#save-button").trigger('click');
				}); 
	    	}
		}
	    
	    $(window).trigger("resize");
	});

	$(window).on('beforeunload', function()
	{
		amCall("geopos", "close", []);
	});


	</script>
</head>
			 
<body oncontextmenu='return false;' >

	<div id="map-container">
		<div id="mapcity" style="position:absolute; z-index:9;  left:0, top:0; width:100%;height:100%;background:#ffffff">
			<div style="position:absolute; top:10px; left:100px; width:100%;z-index:8;">
				<span id="map-legend" style="background:#fff;font-size:3em"></span>
  			 </div> 		
			<div style="padding-left: 10px;padding-right: 10px; position:absolute; bottom:10px; width:100%;">
	           	<input type="button" id="map-global" value="Global" style="float:left; z-index:8;"/>
           		<input type="button" id="map-local" value="Local" style="float:left; z-index:8;"/> 
				<input type="button" id="map-select" value="..." name="OPEN" style="float:left; z-index:128;"/>
  			 </div> 		
		</div>
		<SVG>
	</div>
	<div id="control-container" class="geopos-section">
	 
		<span id="planbar" style="font-size:10px;"></span>
		
		<h3>Auslegung</h3>
		<div id="LAYOUT" class="geopos-section LAYOUT">
			<div id="buttonbar" class="geopos-subsection radio-btn">
				<fieldset style="float:left">
					<legend>Massstab</legend>
					<table>
						<tr><td><input id='200' type='radio' name='massstab' checked></input><label for="200">1:200</label></td></tr>    	
						<tr><td><input id='500' type='radio' name='massstab'></input><label for="500">1:500</label></td></tr>    	
						<tr><td><input id='1000' type='radio' name='massstab'></input><label for="1000">1:1000</label></td></tr>    	
					</table>
				</fieldset>
				<fieldset style="float:left">
					<legend>Auslegung</legend>
					<table>
						<tr><td><input id='hoch' type='radio' name='auslegung' checked></input><label for="hoch">hoch</label></td></tr>    	
						<tr><td><input id='quer' type='radio' name='auslegung'></input><label for="quer">quer</label></td></tr>    	
					</table>
				</fieldset>
				<fieldset style="float:left">
					<legend>Format</legend>
					<table>
						<tr><td><input id='A3' type='radio' name='format' checked></input><label for="A3">A3</label></td></tr>    	
						<tr><td><input id='A4' type='radio' name='format'></input><label for="A4">A4</label></td></tr>    	
					</table>
				</fieldset>
			</div>	
			<div class="geopos-subsection margin">
				<input type="button" id="generate-button" value="Hintergrundbild generieren" /></br>
			</div>	
		</div> 
	
		<h3>Dynamische Objekte</h3>
		<div id="DYNAMIC" class="geopos-section DYNAMIC">
			<div class="geopos-subsection">
				<div style="float:left;width:140px;">
					<input id="filter" style="width:100%;float:top;" type="text" class="ui-widget-content ui-corner-all"></input> 
					<select id="list" size="21" style="width:100%;float:top;" class="select ui-widget-content ui-corner-all"></select>
				</div>
				<div id="symbol" class="style-category dynamic-symbollist" style="float:right;;width:200px;">
					<select id="symbol-category" style="width:96%;margin:5px 5px" class="ui-widget-content ui-corner-all">
						<DYNAMIC_COMBO>					
					</select>
					<DYNAMIC_SYMBOLS>
				</div>						
				
			</div>
		
			<div class="geopos-subsection">
				<div style="float:top">
					<div class="geopos-horizontal-bar-text indent" style="padding-left:1px;">
						<div class="geopos-function-button active" id="select-button" name="SELECT" title="Auwahl Werkzeug">
							<div class="geopos-function-button-icon"></div>
							<div class="geopos-tab-button-text">Auswahl</div>
						</div>			
						<div class="geopos-function-button" id="viewbox-button" name="VIEWBOX"  title="Viewbox Werkzeug &#13;Mit diesem Werkzeug kann der sichtbare Bereich &#13;für die Onlinevisualisierung eingestellt werden">
								<div class="geopos-function-button-icon"></div>
							<div class="geopos-tab-button-text">Viewbox</div>
						</div>			
						<div class="geopos-action-button" style="float:right" id="deploy-button" name="DEPLOY" title="Deploy Werkzeug &#13;Lädt das dynamische Knotenbild hoch. &#13;Nach dem Hochladen ist dieses unter dem Menupunkt &#13;Knotenvisualisierung verfuegbar">
							<div class="geopos-action-button-icon addtext-two" ></div>
							<div class="geopos-tab-button-text">Export KNTVIS</div>
						</div>			
						<div class="geopos-action-button" style="float:right" id="refresh-position" name="REFRESH-POSITION" title="Refresh Werkzeug &#13;Positionen der Objekte werden aus dem statischen Layer uebernommen">
							<div class="geopos-action-button-icon addtext-two" ></div>
							<div class="geopos-tab-button-text">Update Position</div>
						</div>			
						<div class="geopos-action-button" style="float:right" id="refresh-symbol" name="REFRESH-SYMBOL" title="Refresh Werkzeug &#13;Symbole der Objekte werden aus dem statischen Layer uebernommen">
							<div class="geopos-action-button-icon addtext-two"></div>
							<div class="geopos-tab-button-text">Update Symbol</div>
						</div>			
					</div>
				</div>
			</div>
			
		
			
			
		</div>
		
		<h3>Statische Objekte</h3>
		<div id="STATIC" class="geopos-section STATIC">
			<div class="geopos-subsection">
				<div class="geopos-subsection-legend">
					<span>Plankopf Position</span>
				</div>
  				<div id="kopfposition" class="geopos-horizontal-bar" title="Plankopfposition">
					<div class="geopos-function-button active" id="oben-links" name="TOPLEFT" title="Plankopf - oben links">
						<div class="geopos-function-button-icon"></div>
					</div>			
					<div class="geopos-function-button" id="oben-rechts" name="TOPRIGHT" title="Plankopf - oben rechts">
						<div class="geopos-function-button-icon"></div>
					</div>			
					<div class="geopos-function-button" id="unten-links" name="BOTTOMLEFT" title="Plankopf - unten links">
						<div class="geopos-function-button-icon"></div>
					</div>			
					<div class="geopos-function-button" id="unten-rechts" name="BOTTOMRIGHT" title="Plankopf - unten rechts">
						<div class="geopos-function-button-icon"></div>
					</div>		
				</div>
 			</div>
			<div class="geopos-subsection">
 				<div class="geopos-subsection-legend">
					<span>Plankopf Auslegung</span>
				</div>
 				<div id="kopfauslegung" class="geopos-horizontal-bar">
					<div class="geopos-function-button active" id="hoch" name="HOCH" title="Blattausrichtung - hoch">
						<div class="geopos-function-button-icon"></div>
					</div>			
					<div class="geopos-function-button" id="quer" name="QUER" title="Blattausrichtung - quer">
						<div class="geopos-function-button-icon"></div>
					</div>			
					
					<div class="geopos-action-button" style="float:right" id="invertiert" name="INVERTIERT" title="Plankopf - spiegeln">
						<div class="geopos-action-button-icon"></div>
					</div>			
				</div>
			</div>
			<div class="geopos-subsection">
				<div class="geopos-subsection-legend">
					<span>Objekt Auslegung</span>
				</div>
				<div style="float:left;width:calc(100% - 182px);">
					<input id="filter" style="width:100%;float:top;" type="text" class="ui-widget-content ui-corner-all"></input> 
					<select id="list" style="width:100%;float:top" size="21" class="select ui-widget-content ui-corner-all"></select>
				</div>
				<div style="float:right;width:182px;">
					<table class="static-symbollist"></table>
				</div>
			</div>
			<div class="geopos-subsection">
				<div style="float:top">
					<div id="single-mode" class="geopos-horizontal-bar">
						<div class="geopos-function-button active" id="select-button" name="SELECT" title="Auswahl - Werkzeug">
							<div class="geopos-function-button-icon"></div>
						</div>			
						<div class="geopos-function-button" id="measure-button" name="MEASURE" title="Messen - Werkzeug">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button" style="float:right" id="attributes-button" name="ATTRIBUTES"  title="Attributedialog einblenden">
							<div class="geopos-action-button-icon"></div>
						</div>			
					</div>
					<div id="multi-mode" class="geopos-horizontal-bar" style="display:none">
						<div class="geopos-action-button" id="vert-align" name="ALIGNVERT">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button" id="horz-align" name="ALIGNHORZ">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button" id="left-align" name="ALIGNLEFT">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button" id="right-align" name="ALIGNRIGHT">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button" id="top-align" name="ALIGNTOP">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button" id="bottom-align" name="ALIGNBOTTOM">
							<div class="geopos-action-button-icon"></div>
						</div>			
					</div>					
				</div>
			</div>
			<div class="geopos-subsection">
	 			<div class="geopos-subsection-legend">
					<span>Zeichnung Einblenden</span>
				</div>
				<div id="project-overlay" class="geopos-horizontal-bar">
					<div class="geopos-tab-button active" id="LAGEPLAN" name="LAGEPLAN">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Lage</div>
					</div>
					<div class="geopos-tab-button" id="AMPELPLAN" name="AMPELPLAN">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Ampel</div>
					</div>
					<div class="geopos-tab-button" id="DETEKTORPLAN" name="DETEKTORPLAN">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Detektor</div>
					</div>
					<div class="geopos-tab-button" id="SPURENPLAN" name="SPURENPLAN">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Spur</div>
					</div>
					<div class="geopos-tab-button" id="VVAPLAN" name="VVAPLAN">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">VVa</div>
					</div>
				</div>
			</div>
			<div class="geopos-subsection">
	 			<div class="geopos-subsection-legend">
					<span>Objekte Einblenden</span>
				</div>
				<div id="object-overlay" class="geopos-horizontal-bar">
					<div class="geopos-tab-button active" id="LAGEPLAN" name="LAGEPLAN" data-category="META STEUERGERAET">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Lage</div>
					</div>
					<div class="geopos-tab-button" id="AMPELPLAN" name="AMPELPLAN" data-category="AMPEL AMPELMAST">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Ampel</div>
					</div>
					<div class="geopos-tab-button" id="DETEKTORPLAN" name="DETEKTORPLAN" data-category="DETEKTOR">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Detektor</div>
					</div>
					<div class="geopos-tab-button" id="SPURENPLAN" name="SPURENPLAN" data-category="SPUR"">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Spur</div>
					</div>
					<div class="geopos-tab-button" id="VVAPLAN" name="VVAPLAN" data-category="VVA"">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">VVa</div>
					</div>
				</div>
			</div>
		</div>
		
		<div id="attributes" style="display:none">
			<div style="margin:10px;float:top;width:300px">
				<div id="AMPEL" style="display:none" class="geopos-object-panel">
					 <table>
					    <tr>
					      <td align="right">Spur:</td>
					      <td align="left"><span id="SPURNR" class="geopos-object-attrib"></span></td>
					    </tr>
					    <tr>
					      <td align="right">Funktion:</td>
					      <td align="left"><span id="AMPELFUNKTION" class="geopos-object-attrib"></td>
					    </tr>
					    <tr>
					      <td align="right">Typ:</td>
					      <td align="left"><span id="AMPELTYP" class="geopos-object-attrib"></td>
					    </tr>
					    <tr>
					      <td align="right">Zustand:</td>
					      <td align="left"><span id="ZUSTAND" class="geopos-object-attrib"></td>
					    </tr>
					    <tr>
					      <td align="right">Gehäuse:</td>
					      <td align="left"><span id="AMPELGEHAEUSETYP" class="geopos-object-attrib"></td>
					    </tr>
					    <tr>
					      <td align="right">Montage:</td>
					      <td align="left"><span id="MONTAGE" class="geopos-object-attrib"></td>
					    </tr>
					  </table>				
				</div>
				<div id="SPUR" style="display:none" class="geopos-object-panel">
					 <table>
					    <tr>
					      <td align="right">Typ:</td>
					      <td align="left"><span id="SPURTYP" class="geopos-object-attrib"></span></td>
					    </tr>
					    <tr>
					      <td align="right">Konfiguration:</td>
					      <td align="left"><span id="SPURTYPKONF" class="geopos-object-attrib"></td>
					    </tr>
					    <tr>
					      <td align="right">Zustand:</td>
					      <td align="left"><span id="ZUSTAND" class="geopos-object-attrib"></td>
					    </tr>
				    </table>				
				</div>
				<div id="DETEKTOR" style="display:none" class="geopos-object-panel">
					 <table>
					    <tr>
					      <td align="right">Funktion:</td>
					      <td align="left"><span id="DETEKTORFUNKTION" class="geopos-object-attrib"></span></td>
					    </tr>
					    <tr>
					      <td align="right">Aufbereitung:</td>
					      <td align="left"><span id="DETEKTORAUFB" class="geopos-object-attrib"></td>
					    </tr>
					    <tr>
					      <td align="right">Erfassungsart:</td>
					      <td align="left"><span id="DETEKTORERFART" class="geopos-object-attrib">???</td>
					    </tr>
					    <tr>
					      <td align="right">Distanz:</td>
					      <td align="left"><span id="DISTANZ" class="geopos-object-attrib">???</td>
					    </tr>
				    </table>
				</div>
				<div id="VVA" style="display:none" class="geopos-object-panel">
					<table>
					    <tr>
					      <td align="right">VVaTyp:</td>
					      <td align="left"><span id="VVATYP" class="geopos-object-attrib"></span></td>
					    </tr>
					    <tr>
					      <td align="right">Abbiegebeziehung:</td>
					      <td align="left"><span id="ABBIEGEBEZIEHUNG" class="geopos-object-attrib"></td>
					    </tr>
					    <tr>
					      <td align="right">EtaRadius:</td>
					      <td align="left"><span id="ETARADIUS" class="geopos-object-attrib">???</span>&nbsp;<span>[sec]</span></td>
					    </tr>
					    <tr>
					      <td align="right">Spur:</td>
					      <td align="left"><span id="SPUR" class="geopos-object-attrib">???</td>
					    </tr>
				    </table>
				</div>
			</div>
		</div>
				
		<h3>Projektierung</h3>
		<div id="PROJECT" class="geopos-section PROJECT">
			<div class="geopos-subsection">
				<div style="float:top">
					<div class="geopos-vertical-bar">
						<div class="geopos-function-button active" id="edit" name="EDIT" title="Auswahl - Werkzeug">
							<div class="geopos-function-button-icon"></div>
						</div>			
						<div class="geopos-function-button" id="circle" name="CIRCLE" title="Kreiszeichen - Werkzeug">
							<div class="geopos-function-button-icon"></div>
						</div>			
						<div class="geopos-function-button" id="rect" name="RECT" title="Rechteckzeichnen - Werkzeug">
							<div class="geopos-function-button-icon"></div>
						</div>			
						<div class="geopos-function-button" id="text" name="TEXT" title="Text - Werkzeug">
							<div class="geopos-function-button-icon"></div>
						</div>			
						<div class="geopos-function-button" id="path" name="PATH" title="Poligon - Werkzeug">
							<div class="geopos-function-button-icon"></div>
						</div>
						<div class="geopos-function-button" id="draw" name="DRAW"  title="Freihand - Werkzeug">
							<div class="geopos-function-button-icon"></div>
						</div>			
						<div class="geopos-function-button" id="symbol" name="SYMBOL"  title="Symbohleinfuegen">
							<div class="geopos-function-button-icon"></div>
						</div>			
						<div class="geopos-function-button" id="measure" name="MEASURE"  title="Messen - Werkzeug">
							<div class="geopos-function-button-icon"></div>
						</div>			
					</div>
					<div id="stylearea" class="geopos-style-area">
					</div>
				</div>
				<div style="float:top">
					<div class="geopos-horizontal-bar">
						<div class="geopos-action-button unlocked" id="lock" style="visibility:hidden" name="LOCK"  title="Elementverriegeln - Werkzeug">
							<div class="geopos-action-button-icon locked"></div>
						</div>			
						<div class="geopos-action-button geopos-zorder-button" id="front" name="FRONT"  title="In den Vordergrund">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button geopos-zorder-button" id="forward" name="FORWARD" title="Eine Ebene vorwaerts">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button geopos-zorder-button" id="backward" name="BACKWARD" title="eine Ebene zurueck">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button geopos-zorder-button" id="back" name="BACK" title="In den Hintergrund">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button" style="float:right" id="clear" name="CLEAR" title="Alle Zeichnungselemente im Layer loeschen">
							<div class="geopos-action-button-icon"></div>
						</div>			
						<div class="geopos-action-button" style="float:right" id="highlight" name="HIGHLIGHT" title="Highlightmodus - Alle Elemnte hervorheben">
							<div class="geopos-action-button-icon"></div>
						</div>			
					</div>
					<div class="geopos-horizontal-bar">
						<div class="geopos-action-button" style="float:right;visibility:hidden" id="btnCustom" name="CUSTOMSHAPE"  title="Element bearbeiten">
							<div class="geopos-action-button-icon"></div>
						</div>		
					</div>
				</div>
			</div>
			<div class="geopos-subsection margin">
				<legend class="radioLegend">Objekte Einblenden</legend>
				<div id="static-overlay" class="geopos-horizontal-bar">
					<div class="geopos-tab-button active" id="LAGEPLAN" name="LAGEPLAN" data-category="META STEUERGERAET">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Lage</div>
					</div>
					<div class="geopos-tab-button" id="AMPELPLAN" name="AMPELPLAN" data-category="AMPEL AMPELMAST">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Ampel</div>
					</div>
					<div class="geopos-tab-button" id="DETEKTORPLAN" name="DETEKTORPLAN" data-category="DETEKTOR">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Detektor</div>
					</div>
					<div class="geopos-tab-button" id="SPURENPLAN" name="SPURENPLAN" data-category="SPUR"">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">Spur</div>
					</div>
					<div class="geopos-tab-button" id="VVAPLAN" name="VVAPLAN" data-category="VVA"">
						<div class="geopos-tab-button-icon"></div>
						<div class="geopos-tab-button-text">VVa</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="toolbar-container">
		<div id="bar1" class="geopos-view" title="Auslegung">
			<div class="geopos-tab-button active" name="LAYOUT">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Auslegung</div>
			</div>
			<div class="geopos-tab-button geopos-static-background" name="STATIC" title="Statische Objekte bearbeiten (Detektoren, Spuren, usw)">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Statische<br/>Objekte</div>
			</div>
			<div class="geopos-tab-button geopos-static-background" name="PROJECT" title="Zeichnungslayer">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Zeichnen</div>
			</div>
			<div class="geopos-tab-space"></div>
		</div>
		<div  id="bar2" class="geopos-type">
			<div class="geopos-tab-button" id="LAGEPLAN" name="LAGEPLAN" title="Lageplan bearbeiten">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Lage</div>
			</div>
			<div class="geopos-tab-button" id="AMPELPLAN" name="AMPELPLAN" title="Ampelplan bearbeiten">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Ampel</div>
			</div>
			<div class="geopos-tab-button" id="DETEKTORPLAN" name="DETEKTORPLAN" title="Detektorplan bearbeiten">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Detektor</div>
			</div>
			<div class="geopos-tab-button" id="SPURENPLAN" name="SPURENPLAN"  title="Spurenplan bearbeiten">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Spur</div>
			</div>
			<div class="geopos-tab-button" id="VVAPLAN" name="VVAPLAN"  title="VVaPlan bearbeiten">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">VVa</div>
			</div>
			<div class="geopos-tab-space"></div>
		</div>
		<div id="bar3" class="geopos-view">
			<div class="geopos-tab-button" name="DYNAMIC" title="Onlineknotenvisualsierung bearbeiten">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Dynamische<br/>Objekte</div>
			</div>
			<div class="geopos-tab-space"></div>
		</div>
		<div id="bar4" class="geopos-info">
			<label id="knoten-title"></label>
			<div>
				<label id="xco"></label>,<label id="yco"></label>
			</div>
 		</div>
		<div id="bar5" class="geopos-save" title="Update - Knoten wird neu aufgebaut. Zeichnungslayer geht verloren.">
			<div class="geopos-tab-button" id="update-button">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Update</div>
			</div>
			<div class="geopos-tab-space"></div>
			<div class="geopos-tab-button" id="upload-button"  title="Lokalen Knotenplan hochladen (GeoPDF)">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Plan Upload</div>
			</div>
			<div class="geopos-tab-space"></div>
			<div class="geopos-tab-button" id="save-button" name="" value="" title="Speichern (Daten koennen vom VAM uebernommen werden)">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Speichern</div>
			</div>
			<!--  <div class="geopos-tab-button" id="shift-button" name="" value="" title="Oeffnet korrektur dialog zur globalen verschiebung von Elementen">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Korrigieren</div>
			</div>-->
			<div class="geopos-tab-space"></div>
			<div class="geopos-tab-button" id="help-button" name="" value="" title="Oeffnet Hilfe">
				<div class="geopos-tab-button-icon"></div>
				<div class="geopos-tab-button-text">Hilfe</div>
			</div>
			<div class="geopos-tab-space"></div>		
		</div>
	</div>

	<div id="blockMessage" style="width:100%; display:none;">
		<h1><span></span></h1>
	</div>

	<div id="upload-dialog" style="display:none; margin:10px">
		<form action="#">
			<div id="droppedA"></div>
			<div id="droppedB"></div>
		</form>
		<div style="margin-top:15px; height:30px; width:100%">
			<div style="float:left">
				<span>Aufloesung von stufe 0 bis </span> 
				<input id="zoom-to" type="text" style="width:50px" value="6"></input>
			</div>
			<div style="float:right;" title="Konvertierungsprozess von LV03 --> LV95 wir iniziiert">
				<label for="LV95" >LV95</label><input id="LV95" type="checkbox" style="float:right; margin-right:10px"></input>
			</div>
		</div>
		<div style="margin-top:15px; height:30px; width:100%" title="Kommentar hinzufuegen. Dieser erscheint zusammen mit dem datum als Titel">
			<span>Kommentar</span><input type="text" id="map-comment" style="width:100%;float:top"></input>
		</div>
		<div style="margin-top:15px; width:100%">
			<select id="map-list" style="width:100%;float:top" size="11" class="select ui-widget-content ui-corner-all">
			</select>
			<button id='delete-map' title="Loescht die Kartengrundlage vom Server">Karte Loeschen</button>
		</div>
	</div>
	
	<div id="lv95-dialog" style="display:none">
		<div style="margin:10px">
		<p>Dieser Konten wir nun von Bezugsrahmen LV03 auf LV95 konvertiert. Dazu werden die Hintergrundbilder fuer statische und dynamische Visualisieryng geloescht und nach erneutem Laden
		automatisch von der globalen LV95 Karte erzeugt.</p>
		<p>Alle Hintergrundkarten muessen ab sofort ebenfalls im LV95 format bereitgestellt werden. Karten im LV03 format werden nicht mehr zu Auswahl gestellt</p>
		<p>Eine Zurueckstellen auf LV03 ist nicht moeglich. </p>
		</div> 
	</div>
		
	<div style="display:none">
		<div id="styler1" >
			<table id="rect" class="style-category inactive">
				<tr>
					<td class="style-button active">
						<svg>
							<rect class="style-item shape1" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape2" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape3" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape4" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape5" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape6" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape10" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape11" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape12" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape13" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape14" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<rect class="style-item shape15" x="5" y="5" style="stroke-width:2" width="70" height="70" />
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive custom-style">
						<svg style="height: 38px; background: #ccc;" >
							<path fill="#222" class="style-item custom-shape" d="m21.7853,2.00157c4.30425,1.74507 13.35287,1.3893 12.77457,9.26693l-3.29498,3.17958c-8.20878,0.13566 -8.05714,-8.15327 -9.47958,-12.44651zm16.73809,22.40292c4.16473,2.97871 18.18398,12.29111 18.18398,12.29111c1.15956,0.74566 2.55615,-0.60644 1.74675,-1.69029c0,0 -10.16132,-13.03817 -13.40836,-16.8996c-2.56531,-3.05603 -3.8477,-3.16328 -8.39679,-4.43106l-3.00355,2.90419c1.44023,4.26484 1.58891,5.47071 4.87797,7.82566zm-7.50011,4.84657l4.02951,-3.82105c-0.39972,-0.355 -0.75257,-0.70452 -1.06179,-1.05252l-4.0551,3.84513l1.08737,1.02844zm12.67841,-16.2361l7.38753,-7.0028l3.31303,3.135l-7.22242,6.84511c0.67284,0.76413 1.25114,1.48432 1.91644,2.30387l9.5981,-9.09497l-7.61109,-7.19947l-10.33586,9.79375c1.08441,0.33232 2.04277,0.70236 2.95426,1.21951zm7.43843,-4.89624l-6.10783,5.79119c0.36928,0.28965 0.74475,0.61574 1.12643,0.99061l6.06877,-5.75349l-1.08737,-1.02832zm-14.91915,18.26025l-5.53573,5.24716l-4.5806,1.20027l1.26757,-4.33374l5.65451,-5.36079c-0.54814,-0.84795 -0.9492,-1.7485 -1.32171,-2.76841l-7.11413,6.74142l-2.80557,9.80522l10.41666,-2.60511l6.50001,-6.15893c-1.53773,-1.05965 -1.58433,-1.08805 -2.481,-1.7671z" stroke="null"/>
						</svg>
					</td>
				</tr>
			</table>
				
			<table id="circle" class="style-category inactive">
				<tr>
					<td class="style-button active">
						<svg>
							<circle class="style-item shape1" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape2" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape3" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape4" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape5" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape6" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape10" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape11" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape12" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape13" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape14" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<circle class="style-item shape15" style="stroke-width:2" cx="40" cy="40" r="35"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive custom-style">
						<svg style="height: 38px; background: #ccc;" >
							<path fill="#222" class="style-item custom-shape" d="m21.7853,2.00157c4.30425,1.74507 13.35287,1.3893 12.77457,9.26693l-3.29498,3.17958c-8.20878,0.13566 -8.05714,-8.15327 -9.47958,-12.44651zm16.73809,22.40292c4.16473,2.97871 18.18398,12.29111 18.18398,12.29111c1.15956,0.74566 2.55615,-0.60644 1.74675,-1.69029c0,0 -10.16132,-13.03817 -13.40836,-16.8996c-2.56531,-3.05603 -3.8477,-3.16328 -8.39679,-4.43106l-3.00355,2.90419c1.44023,4.26484 1.58891,5.47071 4.87797,7.82566zm-7.50011,4.84657l4.02951,-3.82105c-0.39972,-0.355 -0.75257,-0.70452 -1.06179,-1.05252l-4.0551,3.84513l1.08737,1.02844zm12.67841,-16.2361l7.38753,-7.0028l3.31303,3.135l-7.22242,6.84511c0.67284,0.76413 1.25114,1.48432 1.91644,2.30387l9.5981,-9.09497l-7.61109,-7.19947l-10.33586,9.79375c1.08441,0.33232 2.04277,0.70236 2.95426,1.21951zm7.43843,-4.89624l-6.10783,5.79119c0.36928,0.28965 0.74475,0.61574 1.12643,0.99061l6.06877,-5.75349l-1.08737,-1.02832zm-14.91915,18.26025l-5.53573,5.24716l-4.5806,1.20027l1.26757,-4.33374l5.65451,-5.36079c-0.54814,-0.84795 -0.9492,-1.7485 -1.32171,-2.76841l-7.11413,6.74142l-2.80557,9.80522l10.41666,-2.60511l6.50001,-6.15893c-1.53773,-1.05965 -1.58433,-1.08805 -2.481,-1.7671z" stroke="null"/>
						</svg>
					</td>
				</tr>
			</table>

			<div id="text" class="style-category inactive">
				<table>
					<tr>
						<td class="style-button inactive">
							<svg>
								<text width="50" x="50%" y="50%" dy=".3em" style="text-anchor:middle">
					       			<tspan class="style-item text1">Abc</tspan>
				       			</text>
							</svg>
						</td>
						<td class="style-button inactive">
							<svg>
								<text width="50" x="50%" y="50%" dy=".3em" style="text-anchor:middle">
					       			<tspan class="style-item text2">Abc</tspan>
				       			</text>
							</svg>
						</td>
						<td class="style-button active">
							<svg>
								<text width="50" x="50%" y="50%" dy=".3em" style="text-anchor:middle">
					       			<tspan class="style-item text3">Abc</tspan>
				       			</text>
							</svg>
						</td>
					</tr>
					<tr>
						<td class="style-button inactive">
							<svg>
								<text width="50" x="50%" y="50%" dy=".3em" style="text-anchor:middle">
					       			<tspan class="style-item text4">Abc</tspan>
				       			</text>
							</svg>
						</td>
						<td class="style-button inactive">
							<svg>
								<text width="50" x="50%" y="50%" dy=".3em" style="text-anchor:middle">
					       			<tspan class="style-item text5">Abc</tspan>
				       			</text>
							</svg>
						</td>
						<td class="style-button inactive">
							<svg>
								<text width="50" x="50%" y="50%" dy=".3em" style="text-anchor:middle">
					       			<tspan class="style-item text6">Abc</tspan>
				       			</text>
							</svg>
						</td>
					</tr>
				</table>
	            <textarea id="textarea" class="style-texarea" rows="12" cols="70">Text...</textarea>
			</div>
			
			<table id="path" class="style-category inactive">
				<tr>
					<td class="style-button active">
						<svg>
							<path class="style-item shape1" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape2" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape3" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape4" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape5" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape6" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape10" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape11" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape12" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape13" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape14" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape15" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive custom-style">
						<svg style="height: 38px; background: #ccc;" >
							<path fill="#222" class="style-item custom-shape" d="m21.7853,2.00157c4.30425,1.74507 13.35287,1.3893 12.77457,9.26693l-3.29498,3.17958c-8.20878,0.13566 -8.05714,-8.15327 -9.47958,-12.44651zm16.73809,22.40292c4.16473,2.97871 18.18398,12.29111 18.18398,12.29111c1.15956,0.74566 2.55615,-0.60644 1.74675,-1.69029c0,0 -10.16132,-13.03817 -13.40836,-16.8996c-2.56531,-3.05603 -3.8477,-3.16328 -8.39679,-4.43106l-3.00355,2.90419c1.44023,4.26484 1.58891,5.47071 4.87797,7.82566zm-7.50011,4.84657l4.02951,-3.82105c-0.39972,-0.355 -0.75257,-0.70452 -1.06179,-1.05252l-4.0551,3.84513l1.08737,1.02844zm12.67841,-16.2361l7.38753,-7.0028l3.31303,3.135l-7.22242,6.84511c0.67284,0.76413 1.25114,1.48432 1.91644,2.30387l9.5981,-9.09497l-7.61109,-7.19947l-10.33586,9.79375c1.08441,0.33232 2.04277,0.70236 2.95426,1.21951zm7.43843,-4.89624l-6.10783,5.79119c0.36928,0.28965 0.74475,0.61574 1.12643,0.99061l6.06877,-5.75349l-1.08737,-1.02832zm-14.91915,18.26025l-5.53573,5.24716l-4.5806,1.20027l1.26757,-4.33374l5.65451,-5.36079c-0.54814,-0.84795 -0.9492,-1.7485 -1.32171,-2.76841l-7.11413,6.74142l-2.80557,9.80522l10.41666,-2.60511l6.50001,-6.15893c-1.53773,-1.05965 -1.58433,-1.08805 -2.481,-1.7671z" stroke="null"/>
						</svg>
					</td>
				</tr>
			</table>
			<table id="spline" class="style-category inactive">
				<tr>
					<td class="style-button active">
						<svg>
							<path class="style-item shape1" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape2" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape3" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape4" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape5" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape6" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape10" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape11" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape12" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape13" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape14" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape15" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
			</table>
			
			<table id="draw" class="style-category inactive">
				<tr>
					<td class="style-button active">
						<svg>
							<path class="style-item shape1" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape2" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape3" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape4" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape5" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape6" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape10" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape11" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape12" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape13" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape14" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
					<td class="style-button inactive">
						<svg>
							<path class="style-item shape15" style="stroke-width:2" d="M 5 5 L 20 70 L 70 50"/>
						</svg>
					</td>
				</tr>
				<tr>
					<td class="style-button inactive custom-style">
						<svg style="height: 38px; background: #ccc;" >
							<path fill="#222" class="style-item custom-shape" d="m21.7853,2.00157c4.30425,1.74507 13.35287,1.3893 12.77457,9.26693l-3.29498,3.17958c-8.20878,0.13566 -8.05714,-8.15327 -9.47958,-12.44651zm16.73809,22.40292c4.16473,2.97871 18.18398,12.29111 18.18398,12.29111c1.15956,0.74566 2.55615,-0.60644 1.74675,-1.69029c0,0 -10.16132,-13.03817 -13.40836,-16.8996c-2.56531,-3.05603 -3.8477,-3.16328 -8.39679,-4.43106l-3.00355,2.90419c1.44023,4.26484 1.58891,5.47071 4.87797,7.82566zm-7.50011,4.84657l4.02951,-3.82105c-0.39972,-0.355 -0.75257,-0.70452 -1.06179,-1.05252l-4.0551,3.84513l1.08737,1.02844zm12.67841,-16.2361l7.38753,-7.0028l3.31303,3.135l-7.22242,6.84511c0.67284,0.76413 1.25114,1.48432 1.91644,2.30387l9.5981,-9.09497l-7.61109,-7.19947l-10.33586,9.79375c1.08441,0.33232 2.04277,0.70236 2.95426,1.21951zm7.43843,-4.89624l-6.10783,5.79119c0.36928,0.28965 0.74475,0.61574 1.12643,0.99061l6.06877,-5.75349l-1.08737,-1.02832zm-14.91915,18.26025l-5.53573,5.24716l-4.5806,1.20027l1.26757,-4.33374l5.65451,-5.36079c-0.54814,-0.84795 -0.9492,-1.7485 -1.32171,-2.76841l-7.11413,6.74142l-2.80557,9.80522l10.41666,-2.60511l6.50001,-6.15893c-1.53773,-1.05965 -1.58433,-1.08805 -2.481,-1.7671z" stroke="null"/>
						</svg>
					</td>
				</tr>
			</table>
			
			<div id="symbol" class="style-category project-symbollist inactive">
				<select id="symbol-category" style="width:96%;margin:5px 5px" class="ui-widget-content ui-corner-all">
					<PROJECT_COMBO>
				</select>
				<PROJECT_SYMBOLS>
			</div>						
		</div>
	</div>

	<div style="display:none">
		<div id="shift-dialog">
			<div style="padding: 5px 20px;">Korrigieren X<input style="float:right;width:50px;" id="correctXvalue"></input></div>
			<div id="correctX" style="width: 150px; margin: 5px 20px;"></div>
			<div style="padding: 5px 20px;">Korrigieren Y<input style="float:right;width:50px;" id="correctYvalue"></input></div>
			<div id="correctY" style="width: 150px; margin: 5px 20px;"></div>
		</div>
	</div>
</body>
</html>  